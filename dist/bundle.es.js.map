{"version":3,"file":"bundle.es.js","sources":["../src/lib/char_tree.js","../src/lib/data.js","../src/index.js"],"sourcesContent":["export default class CharTree {\n    constructor(){\n        this.tree = {branches: {}, items: []};\n    }\n    push(...datas){\n        datas.forEach(data=>{\n\n            let next = this.tree;\n            let list = data.value.split('');\n\n            list.forEach(char=>{\n                let key = char.toLowerCase();\n                next = (next.branches[key] = next.branches[key] || Object.create(null));\n                next.branches = next.branches || Object.create(null);\n                next.items = next.items || [];\n                next.items.push(data);\n                next.value = char;\n            });\n\n            next.leaf = true;\n        });\n    }\n    remove(...datas){\n        datas.forEach(data=>{\n            let next = this.tree, last;\n            let list = data.value.split('');\n\n            for(let i=0; i<list.length; i++){\n                let char = list[i];\n                let key = char.toLowerCase();\n                let index;\n\n                last = next;\n                next = next.branches[key];\n\n                if(next === void 0) break;\n\n                if((index = next.items.indexOf(data.value)) !== -1){\n                    next.items.splice(index, 1);\n                    if(!next.items.length){\n                        delete last.branches[key];\n                    }else{\n                        next = next.branches[key];\n                    }\n                }\n\n            }\n        });\n    }\n    match(value){\n        let list = value.split('').map(v=>v.toLowerCase());\n\n        let next = this.tree,\n            len = list.length + 1,\n            last,\n            string = '';\n\n        if(!list.length) return {tree: null, string, value};\n\n        for(let i=0; i<len; i++){\n            last = next;\n            next = next.branches[list[i]];\n            if(!next){\n                if(list[i] !== void 0) last = null;\n                break;\n            }else{\n                string += next.value;\n            }\n        }\n\n        return {tree: last, string, value};\n    }\n    findAll(value){\n        let {tree} = this.match(value);\n        if(!tree) return [];\n        return [].concat(tree.items);\n    }\n    nextPhrase(value, sep){\n\n        let {tree, string} = this.match(value),\n            result = string;\n\n        sep = /[ ]+/;\n\n        const iter = (next)=>{\n\n            if(next.leaf){\n                return result;\n            }\n\n            let keys = Object.keys(next.branches);\n            for(let key in next.branches){\n                if(sep.test(key)){\n                    return result;\n                }\n                result += next.branches[key].value;\n                return iter(next.branches[key])\n\n            }\n        };\n\n        return iter(tree);\n    }\n}\n\nfunction lower(item){\n    return item.toLowerCase();\n}\n","const noKeyDown = [9, 13, 38, 40];\n\nexport { noKeyDown };\n","import { toElement } from 'dom-elementals';\nimport matches from 'matches-selector';\nimport camelcase from 'camelcase';\nimport CharTree from './lib/char_tree.js';\n//import getTarget from './lib/get_target.js';\nimport nearestTarget from 'dom-nearest-target';\nimport { noKeyDown } from './lib/data.js';\nimport events from 'dom-eve';\nimport _arrowSelect from 'dom-arrow-select';\n\n\nclass DOMTextAutocomplete {\n    constructor(input, {\n        parent = '<ol></ol>',\n        classes = {},\n        render = null,\n        separator = '[ ]+',\n        dataKey = 'value',\n        display = 'block',\n        select = function(value){\n            this.input.value = value;\n            this.hide();\n        },\n        activate = function(){\n            this.show();\n        },\n        arrowSelect = null\n    } = {}){\n        const self = this;\n\n        try{\n            this.input = typeof input === 'string'\n            ? document.querySelector(input)\n            : input;\n        }catch(e){\n            throw e;\n        }\n\n        this._render = render;\n\n\n        this.input.setAttribute('tabindex', '-1');\n\n        let {\n            main = 'main-target',\n            data = 'value-target',\n            selected = 'auto-selected'\n        } = (classes || {});\n\n        let keyTimer;\n\n        classes = this.classes = {\n            main, data, selected\n        };\n\n        this.arrowSelect = !!arrowSelect\n        ? arrowSelect\n        : _arrowSelect({\n            selectID: selected\n        });\n\n        this.searchable = new CharTree();\n\n        Object.keys(classes).forEach(clas=>{\n            try{\n                document.querySelector('.'+clas);\n            }catch(e){ throw e; }\n        });\n\n        this.display = display;\n        this.dataKey = dataKey;\n        this.visible = [];\n\n        const dataProp = this.dataProp = camelcase(dataKey);\n\n        this.element = toElement(parent);\n        this.element.style.opacity = 0;\n        this.arrowSelect.focus(this.element);\n\n        function run(event){\n            //Debounce the dropdown activation\n            clearTimeout(keyTimer);\n            keyTimer = setTimeout(()=>{\n                activate.call(self, event);\n            }, 100);\n        }\n\n        function onTab(event){\n            /*let result = self.searchable.match(input.value);\n            if(!result.notFound){\n                input.value = result.value;\n                run(event);\n            }*/\n            let result = self.searchable\n            .nextPhrase(input.value, ' ');\n            console.log(\"result \",result);\n            input.value = result;\n        }\n\n        function onArrow(event){\n            if(self.showing){\n                /*let selected = self.element.querySelector('.'+selected);\n                let children = self.children;\n                if(!selected){\n                    this.choose(0);\n                }else{\n                    let index = children.indexOf(selected);\n                    this.choose(index);\n                }*/\n            }\n        }\n\n        let down = false;\n\n        const tracker = events.track();\n\n        events(document, tracker)\n        .on('keyup', event=>{\n            let key = event.which || event.keyCode;\n            if(self.showing && key === 13){\n                let el = self.element.querySelector('.'+selected);\n                if(el){\n                    el.classList.remove(selected);\n                    select.call(self, el.dataset[dataKey], el);\n                    event.preventDefault();\n                }\n            }\n        });\n\n        events(input, tracker)\n        .on('keyup', event=>{\n            let keyCode = event.which || event.keyCode;\n            if(noKeyDown.indexOf(keyCode) === -1){\n                run(event);\n            }\n            if(keyCode === 9){\n                onTab(event);\n            }/*else\n\n            if(self.showing){\n                if(keyCode === 40){\n                    self.choose(1);\n                }else if(keyCode === 38){\n                    self.choose(-1);\n                }\n            }*/\n        }, false)\n        .on('keydown', event=>{\n            if(event.keyCode === 9){\n                event.preventDefault();\n            }\n        }, false);\n\n        events(this.element, tracker)\n        .on('mousedown', event=>{\n            if(!down){\n                down = true;\n                let el = nearestTarget(event.target, [\n                    classes.data].map(c=>'.'+c));\n                select.call(self, el.dataset[dataKey], el);\n            }\n        }, false)\n        .on('mouseup', event=>{\n            down = false;\n        }, false);\n\n        this.destroy = function(){\n            tracker.clear();\n        };\n    }\n    show(){\n        let value = this.input.value;\n        let found = this.searchable.findAll(value);\n\n        this.element.innerHTML = '';\n        found.forEach(data=>{\n            let html = this._render(data);\n            this.element.insertAdjacentHTML(\n                'beforeend',\n                html\n            );\n\n            this.element.lastChild.dataset[this.dataKey] = data.value;\n        });\n        if(found.length){\n            this.element.style.opacity = 1;\n        }\n    }\n    forEach(callback){\n        this.children.forEach(callback);\n    }\n    get children(){\n        return Array.prototype.slice.call(this.element.children);\n    }\n    get showing(){\n        return !!this.element.style.opacity;\n    }\n    choose(direction){\n\n        if([-1, 1].indexOf(direction) === -1){\n            return;\n        }\n\n        let className = this.classes.selected;\n        let selected = this.element.querySelector('.'+className);\n        let children = this.children;\n        let index = selected\n        ? children.indexOf(selected) + direction : 0;\n\n        if(index === children.length){\n            index = 0;\n        }else if(index === -1){\n            index = children.length - 1;\n        }\n\n        if(direction === 1){\n            for(let i=index; i<children.length; ++i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    break;\n                }\n            }\n        }else{\n            for(let i=index; i>=0; --i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    break;\n                }\n            }\n        }\n\n        if(selected){\n            selected.classList.remove(className);\n        }\n    }\n    hide(){\n        this.element.style.opacity = 0;\n    }\n    push(...values){\n        values.forEach(value=>{\n            this.searchable.push(value);\n        });\n        return this;\n    }\n    replace(values){\n        values.forEach(value=>this.push(value));\n        return this;\n    }\n    appendTo(el){\n        el.appendChild(this.element);\n        return this;\n    }\n    remove(){\n        if(this.element.parentNode){\n            return this.element.parentNode.removeChild(this.element);\n        }\n    }\n}\n\nexport default function autoComplete(input, options){\n    return new DOMTextAutocomplete(input, options);\n}\n\n\n\nfunction makeSelection(children, className, start){\n    for(let i=start; i<children.length; i++){\n        if(children[i].style.display !== 'none'){\n            children[i].classList.add(className);\n        }\n    }\n}\n"],"names":["this","let","const","i"],"mappings":"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"}
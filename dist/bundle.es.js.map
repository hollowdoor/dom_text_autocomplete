{"version":3,"file":"bundle.es.js","sources":["../src/index.js"],"sourcesContent":["import { toElement } from 'dom-elementals';\nimport matches from 'matches-selector';\nimport camelcase from 'camelcase';\n\nclass DOMTextAutocomplete {\n    constructor(input, {\n        parent = '<ol></ol>',\n        target = null,\n        dataKey = 'value',\n        select = function(value){\n            this.input.value = value;\n            this.hide();\n        },\n        activate = function(){\n            this.show();\n        },\n        children = []\n    } = {}){\n        const self = this;\n        this.input = typeof input === 'string'\n        ? document.querySelector(input)\n        : input;\n\n        this.dataKey = dataKey;\n\n        const dataProp = this.dataProp = camelcase(dataKey);\n\n        this.element = toElement(parent);\n        this.element.style.opacity = 0;\n\n        function onKeyup(event){\n            activate.call(self, event);\n        }\n\n        input.addEventListener('keyup', onKeyup, false);\n\n        children.forEach(child=>this.push(child));\n\n        let down = false, downListener;\n\n\n        function onDown(event){\n            if(!down){\n                down = true;\n                if(matches(event.target, target)){\n                    let el = event.target;\n                    console.log('key', dataKey)\n                    console.log('data ',el.dataset[dataKey])\n                    /*if(!el.dataset[dataProp]){\n                        el = el.querySelector('*['+dataKey+']');\n                    }*/\n\n                    let value = el.dataset[dataKey];\n                    select.call(self, value, el);\n                }\n            }\n        }\n\n        function onUp(event){\n            down = false;\n        }\n\n        downListener = onDown;\n\n        this.element.addEventListener('mousedown', onDown, false);\n        this.element.addEventListener('mouseup', onUp, false);\n\n\n        this.destroy = function(){\n            this.remove();\n        };\n    }\n    show(){\n        let value = this.input.value,\n            dataProp = this.dataProp,\n            dataKey = this.dataKey,\n            list = Array.prototype.slice.call(\n                this.element.children);\n        console.log(list);\n        list.forEach(el=>{\n            console.log()\n            if(el.dataset[dataKey].indexOf(value) === 0){\n                el.style.display = 'block';\n            }else{\n                el.style.display = 'none';\n            }\n            /*try{\n                let el = child.querySelector('*['+dataKey+']');\n\n            }catch(e){\n                throw e;\n            }*/\n\n        });\n        this.element.style.opacity = 1;\n    }\n    hide(){\n        this.element.style.opacity = 0;\n    }\n    push(value){\n        this.element.appendChild(toElement(value));\n        return this;\n    }\n    replace(values){\n        values.forEach(value=>this.push(value));\n        return this;\n    }\n    appendTo(el){\n        console.log('this.element ', this.element)\n        el.appendChild(this.element);\n        return this;\n    }\n    remove(){\n        if(this.element.parentNode){\n            return this.element.parentNode.removeChild(this.element);\n        }\n    }\n}\n\nexport default function autoComplete(input, options){\n    return new DOMTextAutocomplete(input, options);\n}\n"],"names":["this"],"mappings":"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"}
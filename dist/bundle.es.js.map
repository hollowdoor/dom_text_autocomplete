{"version":3,"file":"bundle.es.js","sources":["../src/lib/get_target.js","../src/lib/searchable.js","../src/index.js"],"sourcesContent":["import matches from 'matches-selector';\n\nexport default function getTarget(target, targets = []){\n\n    for(let i=0; i<targets.length; i++){\n        if(matches(target, '.'+targets[i])){\n            return target;\n        }\n\n        if(target.children.length){\n            let el = target.querySelector('.'+targets[i]);\n            if(el) return el;\n        }\n    }\n\n    return null;\n}\n\n/*export default function getTarget(target, targets){\n    if(matches(target, '.'+targets.main)){\n        return target;\n    }\n\n    if(target.children.length && !matches(target, '.'+targets.data)){\n        return target.querySelector('.'+targets.data);\n    }\n    return target;\n}*/\n","import camelcase from 'camelcase';\nimport getTarget from './get_target.js';\n\nexport default class Searchable {\n    constructor({\n        classes = {},\n        dataKey = 'value',\n        separator = '[ ]+'\n    } = {}){\n\n        let { main, data } = classes;\n\n        this.classes = {main, data};\n        this.dataProp = camelcase(dataKey);\n        this.dataKey = dataKey;\n        this.tree = {branches: {}};\n        this.sep = new RegExp(separator);\n    }\n    push(element){\n        let src = getTarget(element, [this.classes.data]);\n        let value = src.dataset[this.dataProp];\n        let list = value.split(this.sep);\n        let current = this.tree;\n        let next = current;\n        list.forEach(item=>{\n            let key = item.toLowerCase();\n            //next = next || {branches: {}};\n            next = (next.branches[key] = next.branches[key] || {});\n            next.branches = next.branches || {};\n            next.value = item;\n            //next = current[item] = current[item] || {};\n            //current[item].branches = current[item].branches || {};\n            //current = current[item].branches;\n        });\n\n        next.elements = next.elements || [];\n        next.leaf = true;\n        next.value = value;\n        next.elements.push(element);\n    }\n    match(value){\n        let list = value.split(this.sep)\n        .filter(v=>v.length)\n        .map(v=>v.toLowerCase());\n\n        let next = this.tree, last;\n\n        let result = [];\n\n        for(let i=0; i<list.length; ++i){\n            if(next){\n                last = next;\n                next = next.branches[list[i]] || false;\n\n                if(next){\n                    result.push(next.value);\n                }\n            }\n\n            if(!next && last){\n                let potential = list[i];\n                let keys = Object.keys(last.branches);\n                for(let j=0; j<keys.length; j++){\n\n                    let key = keys[j];\n                    if(key === potential || key.indexOf(potential) === 0){\n                        if(last.branches[key].leaf){\n                            result = last.branches[key].value;\n                        }else{\n                            result.push(last.branches[key].value);\n                            result = result.join(this.sep);\n                        }\n\n                        return {\n                            value: result\n\n                        };\n                    }\n                }\n            }\n        }\n\n        //if(next && next.end) return next;\n        return {notFound: true};\n    }\n    findAll(value){\n\n        let list = value.split(this.sep)\n        .filter(v=>v.length)\n        .map(v=>v.toLowerCase());\n\n        let next = this.tree, last, results = [];\n\n        if(!list.length){\n            return [];\n        }\n\n        for(let i=0; i<list.length; ++i){\n\n            if(next && next.branches){\n                last = next;\n                next = next.branches[list[i]] || false;\n            }\n\n            if(next && i + 1 === list.length){\n                toLeaves(next, results);\n            }else\n\n            if(!next){\n                let potential = list[i];\n                let keys = Object.keys(last.branches);\n                for(let j=0; j<keys.length; ++j){\n                    //console.log('keys[j] ',keys[j]);\n                    let key = keys[j];\n                    if(key === potential || key.indexOf(potential) === 0){\n                        toLeaves(last.branches[keys[j]], results);\n                    }\n                }\n            }\n        }\n\n        return results;\n    }\n}\n\nfunction toLeaves(tree, results = [], depthLimit = 400){\n\n    if(tree !== void 0){\n\n        if(tree.leaf){\n            results.push(tree);\n        }\n\n        let keys = Object.keys(tree.branches);\n\n        for(let i=0; i<keys.length; i++){\n            let current = tree.branches[keys[i]];\n\n            if(current.leaf){\n                results.push(current);\n            }\n\n            toLeaves(current, results, depthLimit);\n        }\n\n    }\n\n    return results;\n}\n","import { toElement } from 'dom-elementals';\nimport matches from 'matches-selector';\nimport camelcase from 'camelcase';\nimport Searchable from './lib/searchable.js';\nimport getTarget from './lib/get_target.js';\n\nclass DOMTextAutocomplete {\n    constructor(input, {\n        parent = '<ol></ol>',\n        classes = {},\n        separator = '[ ]+',\n        dataKey = 'value',\n        display = 'block',\n        select = function(value){\n            this.input.value = value;\n            this.hide();\n        },\n        activate = function(){\n            this.show();\n        },\n        children = []\n    } = {}){\n        const self = this;\n\n        try{\n            this.input = typeof input === 'string'\n            ? document.querySelector(input)\n            : input;\n        }catch(e){\n            throw e;\n        }\n\n        this.input.setAttribute('tabindex', '-1');\n\n        let {\n            main = 'main-target',\n            data = 'value-target',\n            selected = 'auto-selected'\n        } = (classes || {});\n\n        classes = this.classes = {\n            main, data, selected\n        };\n\n        this.searchable = new Searchable({\n            separator,\n            dataKey,\n            classes\n        });\n\n        Object.keys(classes).forEach(clas=>{\n            try{\n                document.querySelector('.'+clas);\n            }catch(e){ throw e; }\n        });\n\n        this.display = display;\n        this.dataKey = dataKey;\n        this.visible = [];\n\n        const dataProp = this.dataProp = camelcase(dataKey);\n\n        this.element = toElement(parent);\n        this.element.style.opacity = 0;\n\n        function onTab(event){\n            let result = self.searchable.match(input.value);\n            if(!result.notFound){\n                input.value = result.value;\n                activate.call(self, event);\n            }\n        }\n\n        function onArrow(event){\n            if(self.showing){\n                let selected = self.element.querySelector('.'+selected);\n                let children = self.children;\n                if(!selected){\n                    this.choose(0);\n                }else{\n                    let index = children.indexOf(selected);\n                    this.choose(index);\n                }\n            }\n        }\n\n        function onKeydown(event){\n            if(event.keyCode === 9){\n                event.preventDefault();\n            }\n        }\n\n        function onKeyup(event){\n            activate.call(self, event);\n            if(event.keyCode === 9){\n                onTab(event);\n            }else\n\n            if(self.showing){\n                if(event.keyCode === 40){\n                    self.choose(1);\n                }else if(event.keyCode === 38){\n                    self.choose(-1);\n                }\n            }\n        }\n\n        children.forEach(child=>this.push(child));\n\n        let down = false;\n\n        function onEnter(event){\n            let key = event.keyCode || event.which;\n            if(self.showing && key === 13){\n                let el = self.element.querySelector('.'+selected);\n                if(el){\n                    el.classList.remove(selected);\n                    select.call(self, el.dataset[dataKey], el);\n                }\n                event.preventDefault();\n            }\n        }\n\n        function onDown(event){\n            if(!down){\n                down = true;\n                let el = getTarget(event.target, [classes.data]);\n                select.call(self, el.dataset[dataKey], el);\n            }\n        }\n\n        function onUp(event){\n            down = false;\n        }\n\n        document.addEventListener('keyup', onEnter);\n        input.addEventListener('keyup', onKeyup, false);\n        input.addEventListener('keydown', onKeydown, false);\n        this.element.addEventListener('mousedown', onDown, false);\n        this.element.addEventListener('mouseup', onUp, false);\n\n        this.destroy = function(){\n            document.removeEventListener('keyup', onEnter);\n            input.removeEventListener('keyup', onKeyup, false);\n            this.element.removeEventListener('mousedown', onDown, false);\n            this.element.removeEventListener('mouseup', onUp, false);\n            this.remove();\n        };\n    }\n    show(){\n\n        let input = this.input.value.toLowerCase();\n        try{\n            let found = this.searchable.findAll(this.input.value);\n            console.log('found ',found);\n\n            this.visible.forEach(el=>{\n                el.style.display = 'none';\n            });\n            this.visible = [];\n            found.forEach(item=>{\n                //console.log('item', item)\n                item.elements.forEach(el=>{\n                    el.style.display = this.display;\n                    this.visible.push(el);\n                });\n            });\n\n            if(this.visible.length){\n                this.element.style.opacity = 1;\n            }\n        }catch(e){ console.error(e)}\n\n        /*let visible = 0;\n        this.forEach(el=>{\n            el = getTarget(el, [this.classes.data]);\n            let potential = el.dataset[this.dataKey].toLowerCase();\n            if(potential.indexOf(input) === 0){\n                ++visible;\n                el.style.display = this.display;//'block';\n            }else{\n                el.style.display = 'none';\n            }\n        });\n\n        if(visible){\n            this.element.style.opacity = 1;\n        }*/\n    }\n    forEach(callback){\n        this.children.forEach(callback);\n    }\n    get children(){\n        return Array.prototype.slice.call(this.element.children);\n    }\n    get showing(){\n        return !!this.element.style.opacity;\n    }\n    choose(direction){\n\n        if([-1, 1].indexOf(direction) === -1){\n            return;\n        }\n\n        let className = this.classes.selected;\n        let selected = this.element.querySelector('.'+className);\n        let children = this.children;\n        let index = selected\n        ? children.indexOf(selected) + direction : 0;\n\n        if(index === children.length){\n            index = 0;\n        }else if(index === -1){\n            index = children.length - 1;\n        }\n\n        if(direction === 1){\n            for(let i=index; i<children.length; ++i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    //let target = getTarget(children[i], th)\n                    break;\n                }\n            }\n        }else{\n            for(let i=index; i>=0; --i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    break;\n                }\n            }\n        }\n\n        if(selected){\n            selected.classList.remove(className);\n        }\n    }\n    hide(){\n        this.element.style.opacity = 0;\n    }\n    push(value){\n        let el = toElement(value);\n        //console.log('el ', el);\n        this.element.appendChild(el);\n        this.searchable.push(el);\n        el.style.display = 'none';\n        return this;\n    }\n    replace(values){\n        values.forEach(value=>this.push(value));\n        return this;\n    }\n    appendTo(el){\n        el.appendChild(this.element);\n        return this;\n    }\n    remove(){\n        if(this.element.parentNode){\n            return this.element.parentNode.removeChild(this.element);\n        }\n    }\n}\n\nexport default function autoComplete(input, options){\n    return new DOMTextAutocomplete(input, options);\n}\n\n\n\nfunction makeSelection(children, className, start){\n    for(let i=start; i<children.length; i++){\n        if(children[i].style.display !== 'none'){\n            children[i].classList.add(className);\n        }\n    }\n}\n"],"names":["let","this","i"],"mappings":"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"}
var domTextAutocomplete=function(){"use strict";function e(e){for(var t=!1,r=!1,n=!1,o=0;o<e.length;o++){var i=e[o];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.substr(0,o)+"-"+e.substr(o),t=!1,n=r,r=!0,o++):r&&n&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.substr(0,o-1)+"-"+e.substr(o-1),n=r,r=!1,t=!0):(t=i.toLowerCase()===i,n=r,r=i.toUpperCase()===i)}return e}function t(e){return e+""=="[object DocumentFragment]"}function r(e){return t(e)||n(e)}function n(e){return null!=e&&"object"==typeof e&&e.nodeType===Node.ELEMENT_NODE&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}function o(e){return"[object Date]"===Object.prototype.toString.call(e)}function i(){for(var e=arguments,r=[],o=arguments.length;o--;)r[o]=e[o];return r.map(function(e){if(void 0===e)return"";if(M(e)&&e.hasOwnProperty("element")&&(e=e.element),"string"==typeof e)return e;if(n(e))return e.outerHTML;if(t(e)){var r=document.createElement("div");return r.appendChild(e.cloneNode(!0)),r.innerHTML}}).join("")}function a(e){var t=document.createElement("div"),r=document.createDocumentFragment();for(t.innerHTML=e;t.firstChild;)r.appendChild(t.firstChild);return r}function c(e){var t=a(e);return 1===t.children.length?t.removeChild(t.firstChild):t}function u(e){try{return e.toLocaleString(_,x)}catch(t){return e+""}}function l(e){if(o(e))return u(e);if(e.constructor===Object)try{return JSON.stringify(e,null,2)}catch(e){}return e+""}function s(e,t){if(e.dataset)return Object.keys(t).forEach(function(r){return e.dataset[T(r)]=t[r]}),e}function f(e,t){if(e.setAttribute&&-1===[3,8,2].indexOf(e.nodeType))return Object.keys(t).forEach(function(r){e.setAttribute(r,t[r]+"")}),e}function h(e,t){var r=window.getComputedStyle(e);e.style&&Object.keys(t).forEach(function(n){void 0!==r[n]?e.style[T(n)]=t[n]+"":e.style.setProperty("--"+decamelize(n,"-"),t[n]+"")})}function d(e){for(var t=arguments,r=[],n=arguments.length-1;n-- >0;)r[n]=t[n+1];return"string"!=typeof e&&k(e)?(e=A(e),r.length?p(e.reduce(function(e,t,n){return e+t+i(r[n])},"")):e.reduce(function(e,t){return e.appendChild(p(t)),e},document.createDocumentFragment())):p(e)}function p(e){if(M(e)&&(e.hasOwnProperty("element")&&(e=e.element),M(e))){if(r(e)||e===document)return e;if(e.hasOwnProperty("tag"))return v(e);e=l(e)}try{var t=document.querySelector(e);if(t)return t}catch(e){}return c(e)}function v(e){var t,r,n=null,o=Object.keys(e),a=function(e){return-1!==(r=o.indexOf(e+""))&&(o.splice(r,1),!0)};if(!a("tag"))throw new Error('obj must have a "tag" property with a DOM tag name');return t=document.createElement(e.tag.toLowerCase()),a("attributes")&&M(e.attributes)&&f(t,e.attributes),a("data")&&M(e.data)&&s(t,e.data),a("innerHTML")&&(t.innerHTML=i(e.innerHTML)),a("head")&&t.appendChild(d(e.head)),a("children")&&k(e.children)&&y(t,e.children),a("foot")&&t.appendChild(d(e.foot)),a("style")&&M(e.style)&&h(t,e.style),a("parent")&&(n=d(e.parent)),o.forEach(function(r){"function"===e[r]||M(e[r])||(t[r]=e[r])}),n&&n.appendChild(t),t}function y(e,t){return A(t).forEach(function(t){e.appendChild(d(t))}),e}function m(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++){if(P(e,"."+t[r]))return e;if(e.children.length){var n=e.querySelector("."+t[r]);if(n)return n}}return null}function b(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function g(e,t){void 0===t&&(t=null);var r=Object.create(U);return r._records=Object.create(null),r.element="string"==typeof e?document.querySelector(e):e,t&&t.list.push(r),r}var w=Array.isArray,j=Object.prototype.toString,O=w||function(e){return!!e&&"[object Array]"==j.call(e)},E=function(e){if(null==e)return!1;var t=Object(e);return t===t.window},C=function(e){var t=S.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},S=Object.prototype.toString,k=function(e){if(!e)return!1;if(O(e))return!0;if(C(e)||E(e))return!1;var t="length"in(e=Object(e))&&e.length;return!(1!==e.nodeType||!t)||(0===t||"number"==typeof t&&t>0&&t-1 in e)},L=function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,n=function(e){var n=t(e);return Math.min(Math.max(n,0),r)},o=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},i=function(t,r){if(null!=t&&null!=r){var n=t[r];if(null==n)return;if(!e(n))throw new TypeError(n+" is not a function");return n}},a=function(e){var t=e.next();return!Boolean(t.done)&&t};return function(t){var r,c=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!e(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}var l,s,f=i(t,o(t));if(void 0!==f){l=e(c)?Object(new c):[];var h=f.call(t);if(null==h)throw new TypeError("Array.from requires an array-like or iterable object");s=0;for(var d,p;;){if(!(d=a(h)))return l.length=s,l;p=d.value,l[s]=u?u.call(r,p,s):p,s++}}else{var v=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var y=n(v.length);l=e(c)?Object(new c(y)):new Array(y),s=0;for(var m;s<y;)m=v[s],l[s]=u?u.call(r,m,s):m,s++;l.length=y}return l}}(),A="function"==typeof Array.from?Array.from:L,T=function(t){return 0===(t=arguments.length>1?Array.from(arguments).map(function(e){return e.trim()}).filter(function(e){return e.length}).join("-"):t.trim()).length?"":1===t.length?t.toLowerCase():/^[a-z0-9]+$/.test(t)?t:(t!==t.toLowerCase()&&(t=e(t)),t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}))},M=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)},x={weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},_=window.navigator.userLanguage||window.navigator.language,N="undefined"!=typeof Element?Element.prototype:{},q=N.matches||N.matchesSelector||N.webkitMatchesSelector||N.mozMatchesSelector||N.msMatchesSelector||N.oMatchesSelector,P=function(e,t){if(!e||1!==e.nodeType)return!1;if(q)return q.call(e,t);for(var r=e.parentNode.querySelectorAll(t),n=0;n<r.length;n++)if(r[n]==e)return!0;return!1},D=function(){this.tree={branches:{},items:[]}};D.prototype.push=function(){for(var e=this,t=[],r=arguments.length;r--;)t[r]=arguments[r];t.forEach(function(t){var r=e.tree;t.value.split("").forEach(function(e){var n=e.toLowerCase();(r=r.branches[n]=r.branches[n]||Object.create(null)).branches=r.branches||Object.create(null),r.items=r.items||[],r.items.push(t),r.value=e}),r.leaf=!0})},D.prototype.remove=function(){for(var e=this,t=[],r=arguments.length;r--;)t[r]=arguments[r];t.forEach(function(t){for(var r,n=e.tree,o=t.value.split(""),i=0;i<o.length;i++){var a=o[i].toLowerCase(),c=void 0;if(r=n,void 0===(n=n.branches[a]))break;-1!==(c=n.items.indexOf(t.value))&&(n.items.splice(c,1),n.items.length?n=n.branches[a]:delete r.branches[a])}})},D.prototype.match=function(e){var t,r=e.split("").map(function(e){return e.toLowerCase()}),n=this.tree,o=r.length+1,i="";if(!r.length)return{tree:null,string:i,value:e};for(var a=0;a<o;a++){if(t=n,!(n=n.branches[r[a]])){void 0!==r[a]&&(t=null);break}i+=n.value}return{tree:t,string:i,value:e}},D.prototype.findAll=function(e){var t=this.match(e).tree;return t?[].concat(t.items):[]},D.prototype.nextPhrase=function(e,t){var r=this.match(e),n=r.tree,o=r.string;t=/[ ]+/;var i=function(e){if(e.leaf)return o;Object.keys(e.branches);for(var r in e.branches)return t.test(r)?o:(o+=e.branches[r].value,i(e.branches[r]))};return i(n)};var H=[9,13,38,40],z=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,U=(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,o=arguments,i=b(e),a=1;a<arguments.length;a++){r=Object(o[a]);for(var c in r)F.call(r,c)&&(i[c]=r[c]);if(z){n=z(r);for(var u=0;u<n.length;u++)K.call(r,n[u])&&(i[n[u]]=r[n[u]])}}return i})(Object.create(null),{on:function(e,t,r){return this.element.addEventListener(e,t,r),this._records[e]=this._records[e]||[],this._records[e].push([e,t,r]),this},off:function(e,t,r){if(this.element.removeEventListener(e,t,r),void 0!==this._records[e])for(var n=this._records[e],o=0;o<n.length;o++)n[o][1]===t&&n[o][2]===r&&(n.splice(o,1),o+1!==n.length&&--o);return this},dispatch:function(e){return this.element.dispatchEvent(e),this},clear:function(){var e=this;for(var t in e._records)e._records[t].forEach(function(t){(r=e).off.apply(r,t);var r});return this}});g.track=function(){return{list:[],clear:function(){this.list.forEach(function(e){e.clear()})}}};var Z=function(e,t){function r(e){clearTimeout(w),w=setTimeout(function(){f.call(h,e)},100)}function n(t){var r=h.searchable.nextPhrase(e.value," ");console.log("result ",r),e.value=r}void 0===t&&(t={});var o=t.parent;void 0===o&&(o="<ol></ol>");var i=t.classes;void 0===i&&(i={});var a=t.render;void 0===a&&(a=null);var c=t.separator;void 0===c&&(c="[ ]+");var u=t.dataKey;void 0===u&&(u="value");var l=t.display;void 0===l&&(l="block");var s=t.select;void 0===s&&(s=function(e){this.input.value=e,this.hide()});var f=t.activate;void 0===f&&(f=function(){this.show()});var h=this;try{this.input="string"==typeof e?document.querySelector(e):e}catch(e){throw e}this._render=a,this.input.setAttribute("tabindex","-1");var p=i||{},v=p.main;void 0===v&&(v="main-target");var y=p.data;void 0===y&&(y="value-target");var b=p.selected;void 0===b&&(b="auto-selected");var w;i=this.classes={main:v,data:y,selected:b},this.searchable=new D,Object.keys(i).forEach(function(e){try{document.querySelector("."+e)}catch(e){throw e}}),this.display=l,this.dataKey=u,this.visible=[];this.dataProp=T(u);this.element=d(o),this.element.style.opacity=0;var j=!1,O=g.track();g(document,O).on("keyup",function(e){var t=e.which||e.keyCode;if(h.showing&&13===t){var r=h.element.querySelector("."+b);r&&(r.classList.remove(b),s.call(h,r.dataset[u],r),e.preventDefault())}}),g(e,O).on("keyup",function(e){var t=e.which||e.keyCode;-1===H.indexOf(t)&&r(e),9===t?n(e):h.showing&&(40===t?h.choose(1):38===t&&h.choose(-1))},!1).on("keydown",function(e){9===e.keyCode&&e.preventDefault()},!1),g(this.element,O).on("mousedown",function(e){if(!j){j=!0;var t=m(e.target,[i.data]);s.call(h,t.dataset[u],t)}},!1).on("mouseup",function(e){j=!1},!1),this.destroy=function(){O.clear()}},$={children:{},showing:{}};return Z.prototype.show=function(){var e=this,t=this.input.value,r=this.searchable.findAll(t);this.element.innerHTML="",r.forEach(function(t){var r=e._render(t);e.element.insertAdjacentHTML("beforeend",r),e.element.lastChild.dataset[e.dataKey]=t.value}),r.length&&(this.element.style.opacity=1)},Z.prototype.forEach=function(e){this.children.forEach(e)},$.children.get=function(){return Array.prototype.slice.call(this.element.children)},$.showing.get=function(){return!!this.element.style.opacity},Z.prototype.choose=function(e){if(-1!==[-1,1].indexOf(e)){var t=this.classes.selected,r=this.element.querySelector("."+t),n=this.children,o=r?n.indexOf(r)+e:0;if(o===n.length?o=0:-1===o&&(o=n.length-1),1===e){for(var i=o;i<n.length;++i)if("none"!==n[i].style.display){n[i].classList.add(t);break}}else for(var a=o;a>=0;--a)if("none"!==n[a].style.display){n[a].classList.add(t);break}r&&r.classList.remove(t)}},Z.prototype.hide=function(){this.element.style.opacity=0},Z.prototype.push=function(){for(var e=this,t=[],r=arguments.length;r--;)t[r]=arguments[r];return t.forEach(function(t){e.searchable.push(t)}),this},Z.prototype.replace=function(e){var t=this;return e.forEach(function(e){return t.push(e)}),this},Z.prototype.appendTo=function(e){return e.appendChild(this.element),this},Z.prototype.remove=function(){if(this.element.parentNode)return this.element.parentNode.removeChild(this.element)},Object.defineProperties(Z.prototype,$),function(e,t){return new Z(e,t)}}();
//# sourceMappingURL=dom-text-autocomplete.min.js.map

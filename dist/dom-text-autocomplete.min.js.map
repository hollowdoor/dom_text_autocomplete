{"version":3,"file":"dom-text-autocomplete.min.js","sources":["../node_modules/camelcase/index.js","../node_modules/dom-elementals/dist/bundle.es.js","../src/lib/get_target.js","../src/lib/searchable.js","../node_modules/is-array/index.js","../node_modules/is-window/index.js","../node_modules/is-function/index.js","../node_modules/is-array-like/index.js","../node_modules/array-from/polyfill.js","../node_modules/array-from/index.js","../node_modules/isobject/index.js","../node_modules/matches-selector/index.js","../src/lib/data.js","../src/index.js"],"sourcesContent":["'use strict';\n\nfunction preserveCamelCase(str) {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\tconst c = str[i];\n\n\t\tif (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {\n\t\t\tstr = str.substr(0, i) + '-' + str.substr(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(c) && c.toLowerCase() === c) {\n\t\t\tstr = str.substr(0, i - 1) + '-' + str.substr(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = c.toLowerCase() === c;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = c.toUpperCase() === c;\n\t\t}\n\t}\n\n\treturn str;\n}\n\nmodule.exports = function (str) {\n\tif (arguments.length > 1) {\n\t\tstr = Array.from(arguments)\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tstr = str.trim();\n\t}\n\n\tif (str.length === 0) {\n\t\treturn '';\n\t}\n\n\tif (str.length === 1) {\n\t\treturn str.toLowerCase();\n\t}\n\n\tif (/^[a-z0-9]+$/.test(str)) {\n\t\treturn str;\n\t}\n\n\tconst hasUpperCase = str !== str.toLowerCase();\n\n\tif (hasUpperCase) {\n\t\tstr = preserveCamelCase(str);\n\t}\n\n\treturn str\n\t\t.replace(/^[_.\\- ]+/, '')\n\t\t.toLowerCase()\n\t\t.replace(/[_.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase());\n};\n","import isArrayLike from 'is-array-like';\nimport arrayFrom from 'array-from';\nimport camelcase from 'camelcase';\nimport isObject from 'isobject';\n\n//No such module\nfunction isDocumentFragment(v){\n    return (v + '') === '[object DocumentFragment]';\n}\n\nfunction isElemental(v){\n    return isDocumentFragment(v) || isElement(v);\n}\n\n//isElement exists as a module, but it's not viable\nfunction isElement(input) {\n\n  return (input != null)\n    && (typeof input === 'object')\n    && (input.nodeType === Node.ELEMENT_NODE)\n    && (typeof input.style === 'object')\n    && (typeof input.ownerDocument === 'object');\n}\n\nfunction isDate(v){\n    return Object.prototype.toString.call(v) === '[object Date]';\n}\n\nfunction toHTML(){\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n\n    return values.map(function (v){\n        if(v === void 0) { return ''; }\n\n        if(isObject(v) && v.hasOwnProperty('element')){\n            v = v.element;\n        }\n\n        if(typeof v === 'string'){\n            return v;\n        }\n\n        if(isElement(v)){\n            return v.outerHTML;\n        }else if(isDocumentFragment(v)){\n            var d = document.createElement('div');\n            d.appendChild(v.cloneNode(true));\n            return d.innerHTML;\n        }\n    }).join('');\n}\n\nfunction stringToFragment(str){\n    var d = document.createElement('div');\n    //A fragment allows a single source of entry\n    //to multiple children without a parent\n    var frag = document.createDocumentFragment();\n    //NOTE: Nested paragraph tags get screwed up in innerHTML.\n    //This also happens with other certain mixes of tags.\n    d.innerHTML = str;\n    while(d.firstChild){\n        frag.appendChild(d.firstChild);\n    }\n    return frag;\n}\n\nfunction stringToElement(str){\n    var frag = stringToFragment(str);\n    //Sometimes we can get away with a single child\n    if(frag.children.length === 1){\n        return frag.removeChild(frag.firstChild);\n    }\n    return frag;\n}\n\nvar localeOptions = {\n    weekday: 'short',\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n};\n\nvar language = window.navigator.userLanguage\n|| window.navigator.language;\n\nfunction toLocaleString(v){\n    try{\n        return v.toLocaleString(\n            language,\n            localeOptions\n        );\n    }catch(e){\n        return v + '';\n    }\n}\n\nfunction objectToString(v){\n    var str = '';\n    if(isDate(v)){\n        //Make it pretty when the date is a lone value\n        return toLocaleString(v);\n    }\n\n    if(v.constructor === Object){\n        //Let Date be the ISO standard for JSON objects\n        try{\n            return JSON.stringify(v, null, 2);\n        }catch(e){}\n    }\n    //All other objects are toStringed\n    //This way user space toString is considered\n    return v + '';\n}\n\nfunction setData(el, data){\n    if(!el.dataset) { return; }\n    Object.keys(data).forEach(\n        function (key){ return el.dataset[camelcase(key)] = data[key]; }\n    );\n    return el;\n}\n\nfunction setAttributes(el, attributes){\n    if(!el.setAttribute) { return; }\n    if([3, //text\n        8, //comment\n        2  //attribute\n    ].indexOf(el.nodeType) !== -1) { return; }\n\n    Object.keys(attributes).forEach(function (key){\n        el.setAttribute(key, attributes[key] + '');\n    });\n    return el;\n}\n\nfunction setStyles(el, styles){\n    var allstyles = window.getComputedStyle(el);\n    if(!el.style) { return; }\n    Object.keys(styles).forEach(function (key){\n        if(allstyles[key] === void 0){\n            el.style.setProperty(\n                '--'+decamelize(key, '-'),\n                styles[key] + ''\n            );\n            return;\n        }\n        el.style[camelcase(key)] = styles[key] + '';\n    });\n}\n\n//import isObject from 'isobject';\nfunction toElement(v){\n    var values = [], len = arguments.length - 1;\n    while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n\n    if(typeof v !== 'string' && isArrayLike(v)){\n\n        v = arrayFrom(v);\n\n        if(values.length){\n            var html = v.reduce(function (html, str, i){\n                return html + str + toHTML(values[i]);\n            }, '');\n            return convert(html);\n        }\n\n        return v.reduce(function (frag, value){\n            frag.appendChild(convert(value));\n            return frag;\n        }, document.createDocumentFragment());\n\n    }\n\n    return convert(v);\n}\n\nfunction convert(v){\n\n    if(isObject(v)){\n        if(v.hasOwnProperty('element')) { v = v.element; }\n\n        if(isObject(v)){\n            if(isElemental(v) || v === document){\n                return v;\n            }\n\n            if(v.hasOwnProperty('tag')){\n                return objectToDOM(v);\n            }\n\n            v = objectToString(v);\n        }\n    }\n\n    try{\n        var el = document.querySelector(v);\n        if(el) { return el; }\n    }catch(e){}\n\n    return stringToElement(v);\n}\n\n\nfunction objectToDOM(obj){\n\n    var el, parentNode = null, keys = Object.keys(obj), index;\n\n    var hadKey = function (key){\n        if((index = keys.indexOf(key + '')) !== -1){\n            keys.splice(index, 1);\n            return true;\n        }\n        return false;\n    };\n\n    if(hadKey('tag')){\n        el = document.createElement(obj.tag.toLowerCase());\n    }else{\n        throw new Error('obj must have a \"tag\" property with a DOM tag name');\n    }\n\n    if(hadKey('attributes') && isObject(obj.attributes)){\n        setAttributes(el, obj.attributes);\n    }\n\n    if(hadKey('data') && isObject(obj.data)){\n        setData(el, obj.data);\n    }\n\n    if(hadKey('innerHTML')){\n        el.innerHTML = toHTML(obj.innerHTML);\n    }\n\n    if(hadKey('head')){\n        el.appendChild(toElement(obj.head));\n    }\n\n    if(hadKey('children') && isArrayLike(obj.children)){\n        appendChildren(el, obj.children);\n    }\n\n    if(hadKey('foot')){\n        el.appendChild(toElement(obj.foot));\n    }\n\n    if(hadKey('style') && isObject(obj.style)){\n        setStyles(el, obj.style);\n    }\n\n    if(hadKey('parent')){\n        parentNode = toElement(obj.parent);\n    }\n\n    keys.forEach(function (key){\n        if(obj[key] !== 'function' && !isObject(obj[key])){\n            el[key] = obj[key];\n        }\n    });\n\n    if(parentNode){\n        parentNode.appendChild(el);\n    }\n\n    return el;\n}\n\n\n\nfunction appendChildren(el, children){\n    arrayFrom(children).forEach(function (child){\n        el.appendChild(toElement(child));\n    });\n    return el;\n}\n\nexport { toHTML, arrayFrom, setAttributes, isElement, toElement, convert, objectToDOM };\n//# sourceMappingURL=bundle.es.js.map\n","import matches from 'matches-selector';\n\nexport default function getTarget(target, targets = []){\n\n    for(let i=0; i<targets.length; i++){\n        if(matches(target, '.'+targets[i])){\n            return target;\n        }\n\n        if(target.children.length){\n            let el = target.querySelector('.'+targets[i]);\n            if(el) return el;\n        }\n    }\n\n    return null;\n}\n\n/*export default function getTarget(target, targets){\n    if(matches(target, '.'+targets.main)){\n        return target;\n    }\n\n    if(target.children.length && !matches(target, '.'+targets.data)){\n        return target.querySelector('.'+targets.data);\n    }\n    return target;\n}*/\n","import camelcase from 'camelcase';\nimport getTarget from './get_target.js';\n\nexport default class Searchable {\n    constructor({\n        classes = {},\n        dataKey = 'value',\n        separator = '[ ]+'\n    } = {}){\n\n        let { main, data } = classes;\n\n        this.classes = {main, data};\n        this.dataProp = camelcase(dataKey);\n        this.dataKey = dataKey;\n        this.tree = {branches: {}};\n        this.sep = new RegExp('('+separator+')');\n    }\n    push(element){\n        let src = getTarget(element, [this.classes.data]);\n        let value = src.dataset[this.dataProp];\n        let list = value\n        .split(this.sep)\n        .filter(item=>!this.sep.test(item));\n\n        let current = this.tree;\n        let next = current;\n        list.forEach(item=>{\n            let key = item.toLowerCase();\n            next = (next.branches[key] = next.branches[key] || {});\n            next.branches = next.branches || {};\n            next.value = item;\n        });\n\n        next.elements = next.elements || [];\n        next.leaf = true;\n        next.value = value;\n        next.elements.push(element);\n    }\n    match(value){\n        let list = value.split(this.sep)\n        .filter(v=>v.length)\n        .map(v=>v.toLowerCase());\n\n        let sep = '';\n\n        for(let i=0; i<list.length; i++){\n            if(this.sep.test(list[i])){\n                sep = list[i]; break;\n            }\n        }\n\n        list = list.filter(v=>!this.sep.test(v));\n\n        //return {notFound: true};\n\n        let next = this.tree, last;\n\n        let result = [];\n\n        for(let i=0; i<list.length; ++i){\n            if(next){\n                last = next;\n                next = next.branches[list[i]] || false;\n\n                if(next){\n                    result.push(next.value);\n                }\n            }\n\n            if(!next && last){\n                let potential = list[i];\n                let keys = Object.keys(last.branches);\n                for(let j=0; j<keys.length; j++){\n\n                    let key = keys[j];\n                    if(key === potential || key.indexOf(potential) === 0){\n                        if(last.branches[key].leaf){\n                            result = last.branches[key].value;\n                        }else{\n                            result.push(last.branches[key].value);\n                            result = result.join(sep);\n                        }\n\n                        return {\n                            value: result\n\n                        };\n                    }\n                }\n            }\n        }\n\n        return {notFound: true};\n    }\n    findAll(value){\n\n        let list = value.split(this.sep)\n        .filter(v=>v.length)\n        .map(v=>v.toLowerCase());\n\n        list = list.filter(v=>!this.sep.test(v));\n\n        console.log('list ', list);\n        //return [];\n\n        let next = this.tree, last, results = [];\n\n        if(!list.length){\n            return [];\n        }\n\n        for(let i=0; i<list.length; ++i){\n\n            if(next && next.branches){\n                last = next;\n                next = next.branches[list[i]] || false;\n            }\n\n            if(next && i + 1 === list.length){\n                toLeaves(next, results);\n            }else\n\n            if(!next){\n                let potential = list[i];\n                let keys = Object.keys(last.branches);\n                for(let j=0; j<keys.length; ++j){\n                    let key = keys[j];\n                    if(key === potential || key.indexOf(potential) === 0){\n                        toLeaves(last.branches[keys[j]], results);\n                    }\n                }\n            }\n        }\n\n        return results;\n    }\n}\n\nfunction toLeaves(tree, results = [], depthLimit = 400){\n\n    if(tree !== void 0){\n\n        if(tree.leaf){\n            results.push(tree);\n        }\n\n        let keys = Object.keys(tree.branches);\n\n        for(let i=0; i<keys.length; i++){\n            let current = tree.branches[keys[i]];\n\n            if(current.leaf){\n                results.push(current);\n            }\n\n            toLeaves(current, results, depthLimit);\n        }\n\n    }\n\n    return results;\n}\n","\n/**\n * isArray\n */\n\nvar isArray = Array.isArray;\n\n/**\n * toString\n */\n\nvar str = Object.prototype.toString;\n\n/**\n * Whether or not the given `val`\n * is an array.\n *\n * example:\n *\n *        isArray([]);\n *        // > true\n *        isArray(arguments);\n *        // > false\n *        isArray('');\n *        // > false\n *\n * @param {mixed} val\n * @return {bool}\n */\n\nmodule.exports = isArray || function (val) {\n  return !! val && '[object Array]' == str.call(val);\n};\n","'use strict';\n\nmodule.exports = function (obj) {\n\n  if (obj == null) {\n    return false;\n  }\n\n  var o = Object(obj);\n\n  return o === o.window;\n};\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","'use strict';\n\nvar isArray    = require('is-array');\nvar isWindow   = require('is-window');\nvar isFunction = require('is-function');\n\n\nmodule.exports = function (obj) {\n\n  if (!obj) {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    return true;\n  }\n\n  if (isFunction(obj) || isWindow(obj)) {\n    return false;\n  }\n\n  obj = Object(obj);\n\n  var length = 'length' in obj && obj.length;\n\n  if (obj.nodeType === 1 && length) {\n    return true;\n  }\n\n  return length === 0 ||\n    typeof length === 'number' && length > 0 && ( length - 1 ) in obj;\n};\n","// Production steps of ECMA-262, Edition 6, 22.1.2.1\n// Reference: http://www.ecma-international.org/ecma-262/6.0/#sec-array.from\nmodule.exports = (function() {\n  var isCallable = function(fn) {\n    return typeof fn === 'function';\n  };\n  var toInteger = function (value) {\n    var number = Number(value);\n    if (isNaN(number)) { return 0; }\n    if (number === 0 || !isFinite(number)) { return number; }\n    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n  };\n  var maxSafeInteger = Math.pow(2, 53) - 1;\n  var toLength = function (value) {\n    var len = toInteger(value);\n    return Math.min(Math.max(len, 0), maxSafeInteger);\n  };\n  var iteratorProp = function(value) {\n    if(value != null) {\n      if(['string','number','boolean','symbol'].indexOf(typeof value) > -1){\n        return Symbol.iterator;\n      } else if (\n        (typeof Symbol !== 'undefined') &&\n        ('iterator' in Symbol) &&\n        (Symbol.iterator in value)\n      ) {\n        return Symbol.iterator;\n      }\n      // Support \"@@iterator\" placeholder, Gecko 27 to Gecko 35\n      else if ('@@iterator' in value) {\n        return '@@iterator';\n      }\n    }\n  };\n  var getMethod = function(O, P) {\n    // Assert: IsPropertyKey(P) is true.\n    if (O != null && P != null) {\n      // Let func be GetV(O, P).\n      var func = O[P];\n      // ReturnIfAbrupt(func).\n      // If func is either undefined or null, return undefined.\n      if(func == null) {\n        return void 0;\n      }\n      // If IsCallable(func) is false, throw a TypeError exception.\n      if (!isCallable(func)) {\n        throw new TypeError(func + ' is not a function');\n      }\n      return func;\n    }\n  };\n  var iteratorStep = function(iterator) {\n    // Let result be IteratorNext(iterator).\n    // ReturnIfAbrupt(result).\n    var result = iterator.next();\n    // Let done be IteratorComplete(result).\n    // ReturnIfAbrupt(done).\n    var done = Boolean(result.done);\n    // If done is true, return false.\n    if(done) {\n      return false;\n    }\n    // Return result.\n    return result;\n  };\n\n  // The length property of the from method is 1.\n  return function from(items /*, mapFn, thisArg */ ) {\n    'use strict';\n\n    // 1. Let C be the this value.\n    var C = this;\n\n    // 2. If mapfn is undefined, let mapping be false.\n    var mapFn = arguments.length > 1 ? arguments[1] : void 0;\n\n    var T;\n    if (typeof mapFn !== 'undefined') {\n      // 3. else\n      //   a. If IsCallable(mapfn) is false, throw a TypeError exception.\n      if (!isCallable(mapFn)) {\n        throw new TypeError(\n          'Array.from: when provided, the second argument must be a function'\n        );\n      }\n\n      //   b. If thisArg was supplied, let T be thisArg; else let T\n      //      be undefined.\n      if (arguments.length > 2) {\n        T = arguments[2];\n      }\n      //   c. Let mapping be true (implied by mapFn)\n    }\n\n    var A, k;\n\n    // 4. Let usingIterator be GetMethod(items, @@iterator).\n    // 5. ReturnIfAbrupt(usingIterator).\n    var usingIterator = getMethod(items, iteratorProp(items));\n\n    // 6. If usingIterator is not undefined, then\n    if (usingIterator !== void 0) {\n      // a. If IsConstructor(C) is true, then\n      //   i. Let A be the result of calling the [[Construct]]\n      //      internal method of C with an empty argument list.\n      // b. Else,\n      //   i. Let A be the result of the abstract operation ArrayCreate\n      //      with argument 0.\n      // c. ReturnIfAbrupt(A).\n      A = isCallable(C) ? Object(new C()) : [];\n\n      // d. Let iterator be GetIterator(items, usingIterator).\n      var iterator = usingIterator.call(items);\n\n      // e. ReturnIfAbrupt(iterator).\n      if (iterator == null) {\n        throw new TypeError(\n          'Array.from requires an array-like or iterable object'\n        );\n      }\n\n      // f. Let k be 0.\n      k = 0;\n\n      // g. Repeat\n      var next, nextValue;\n      while (true) {\n        // i. Let Pk be ToString(k).\n        // ii. Let next be IteratorStep(iterator).\n        // iii. ReturnIfAbrupt(next).\n        next = iteratorStep(iterator);\n\n        // iv. If next is false, then\n        if (!next) {\n\n          // 1. Let setStatus be Set(A, \"length\", k, true).\n          // 2. ReturnIfAbrupt(setStatus).\n          A.length = k;\n\n          // 3. Return A.\n          return A;\n        }\n        // v. Let nextValue be IteratorValue(next).\n        // vi. ReturnIfAbrupt(nextValue)\n        nextValue = next.value;\n\n        // vii. If mapping is true, then\n        //   1. Let mappedValue be Call(mapfn, T, «nextValue, k»).\n        //   2. If mappedValue is an abrupt completion, return\n        //      IteratorClose(iterator, mappedValue).\n        //   3. Let mappedValue be mappedValue.[[value]].\n        // viii. Else, let mappedValue be nextValue.\n        // ix.  Let defineStatus be the result of\n        //      CreateDataPropertyOrThrow(A, Pk, mappedValue).\n        // x. [TODO] If defineStatus is an abrupt completion, return\n        //    IteratorClose(iterator, defineStatus).\n        if (mapFn) {\n          A[k] = mapFn.call(T, nextValue, k);\n        }\n        else {\n          A[k] = nextValue;\n        }\n        // xi. Increase k by 1.\n        k++;\n      }\n      // 7. Assert: items is not an Iterable so assume it is\n      //    an array-like object.\n    } else {\n\n      // 8. Let arrayLike be ToObject(items).\n      var arrayLike = Object(items);\n\n      // 9. ReturnIfAbrupt(items).\n      if (items == null) {\n        throw new TypeError(\n          'Array.from requires an array-like object - not null or undefined'\n        );\n      }\n\n      // 10. Let len be ToLength(Get(arrayLike, \"length\")).\n      // 11. ReturnIfAbrupt(len).\n      var len = toLength(arrayLike.length);\n\n      // 12. If IsConstructor(C) is true, then\n      //     a. Let A be Construct(C, «len»).\n      // 13. Else\n      //     a. Let A be ArrayCreate(len).\n      // 14. ReturnIfAbrupt(A).\n      A = isCallable(C) ? Object(new C(len)) : new Array(len);\n\n      // 15. Let k be 0.\n      k = 0;\n      // 16. Repeat, while k < len… (also steps a - h)\n      var kValue;\n      while (k < len) {\n        kValue = arrayLike[k];\n        if (mapFn) {\n          A[k] = mapFn.call(T, kValue, k);\n        }\n        else {\n          A[k] = kValue;\n        }\n        k++;\n      }\n      // 17. Let setStatus be Set(A, \"length\", len, true).\n      // 18. ReturnIfAbrupt(setStatus).\n      A.length = len;\n      // 19. Return A.\n    }\n    return A;\n  };\n})();\n","module.exports = (typeof Array.from === 'function' ?\n  Array.from :\n  require('./polyfill')\n);\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","'use strict';\n\nvar proto = typeof Element !== 'undefined' ? Element.prototype : {};\nvar vendor = proto.matches\n  || proto.matchesSelector\n  || proto.webkitMatchesSelector\n  || proto.mozMatchesSelector\n  || proto.msMatchesSelector\n  || proto.oMatchesSelector;\n\nmodule.exports = match;\n\n/**\n * Match `el` to `selector`.\n *\n * @param {Element} el\n * @param {String} selector\n * @return {Boolean}\n * @api public\n */\n\nfunction match(el, selector) {\n  if (!el || el.nodeType !== 1) return false;\n  if (vendor) return vendor.call(el, selector);\n  var nodes = el.parentNode.querySelectorAll(selector);\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] == el) return true;\n  }\n  return false;\n}\n","const noKeyDown = [9, 13, 38, 40];\n\nexport { noKeyDown };\n","import { toElement } from 'dom-elementals';\nimport matches from 'matches-selector';\nimport camelcase from 'camelcase';\nimport Searchable from './lib/searchable.js';\nimport getTarget from './lib/get_target.js';\nimport { noKeyDown } from './lib/data.js';\n\nclass DOMTextAutocomplete {\n    constructor(input, {\n        parent = '<ol></ol>',\n        classes = {},\n        separator = '[ ]+',\n        dataKey = 'value',\n        display = 'block',\n        select = function(value){\n            this.input.value = value;\n            this.hide();\n        },\n        activate = function(){\n            this.show();\n        },\n        children = []\n    } = {}){\n        const self = this;\n\n        try{\n            this.input = typeof input === 'string'\n            ? document.querySelector(input)\n            : input;\n        }catch(e){\n            throw e;\n        }\n\n        this.input.setAttribute('tabindex', '-1');\n\n        let {\n            main = 'main-target',\n            data = 'value-target',\n            selected = 'auto-selected'\n        } = (classes || {});\n\n        let keyTimer;\n\n        classes = this.classes = {\n            main, data, selected\n        };\n\n        this.searchable = new Searchable({\n            separator,\n            dataKey,\n            classes\n        });\n\n        Object.keys(classes).forEach(clas=>{\n            try{\n                document.querySelector('.'+clas);\n            }catch(e){ throw e; }\n        });\n\n        this.display = display;\n        this.dataKey = dataKey;\n        this.visible = [];\n\n        const dataProp = this.dataProp = camelcase(dataKey);\n\n        this.element = toElement(parent);\n        this.element.style.opacity = 0;\n\n\n\n        function run(event){\n            //Debounce the dropdown activation\n            clearTimeout(keyTimer);\n            keyTimer = setTimeout(()=>{\n                activate.call(self, event);\n            }, 100);\n        }\n\n        function onTab(event){\n            let result = self.searchable.match(input.value);\n            if(!result.notFound){\n                input.value = result.value;\n                run(event);\n            }\n        }\n\n        function onArrow(event){\n            if(self.showing){\n                let selected = self.element.querySelector('.'+selected);\n                let children = self.children;\n                if(!selected){\n                    this.choose(0);\n                }else{\n                    let index = children.indexOf(selected);\n                    this.choose(index);\n                }\n            }\n        }\n\n        function onKeydown(event){\n            if(event.keyCode === 9){\n                event.preventDefault();\n            }\n        }\n\n        function onKeyup(event){\n            let keyCode = event.which || event.keyCode;\n            if(noKeyDown.indexOf(keyCode) === -1){\n                run(event);\n            }\n            if(keyCode === 9){\n                onTab(event);\n            }else\n\n            if(self.showing){\n                if(keyCode === 40){\n                    self.choose(1);\n                }else if(keyCode === 38){\n                    self.choose(-1);\n                }\n            }\n        }\n\n        this.push(...children);\n\n        let down = false;\n\n        function onEnter(event){\n            let key = event.which || event.keyCode;\n            if(self.showing && key === 13){\n                let el = self.element.querySelector('.'+selected);\n                if(el){\n                    el.classList.remove(selected);\n                    select.call(self, el.dataset[dataKey], el);\n                    event.preventDefault();\n                }\n            }\n        }\n\n        function onDown(event){\n            if(!down){\n                down = true;\n                let el = getTarget(event.target, [classes.data]);\n                select.call(self, el.dataset[dataKey], el);\n            }\n        }\n\n        function onUp(event){\n            down = false;\n        }\n\n        document.addEventListener('keyup', onEnter);\n        input.addEventListener('keyup', onKeyup, false);\n        input.addEventListener('keydown', onKeydown, false);\n        this.element.addEventListener('mousedown', onDown, false);\n        this.element.addEventListener('mouseup', onUp, false);\n\n        this.destroy = function(){\n            document.removeEventListener('keyup', onEnter);\n            input.removeEventListener('keyup', onKeyup, false);\n            this.element.removeEventListener('mousedown', onDown, false);\n            this.element.removeEventListener('mouseup', onUp, false);\n            this.remove();\n        };\n    }\n    show(){\n\n        let input = this.input.value.toLowerCase();\n        try{\n            let found = this.searchable.findAll(this.input.value);\n\n            this.visible.forEach(el=>{\n                el.style.display = 'none';\n            });\n            this.visible = [];\n            found.forEach(item=>{\n                item.elements.forEach(el=>{\n                    el.style.display = this.display;\n                    this.visible.push(el);\n                });\n            });\n\n            if(this.visible.length){\n                this.element.style.opacity = 1;\n            }\n        }catch(e){ console.error(e)}\n    }\n    forEach(callback){\n        this.children.forEach(callback);\n    }\n    get children(){\n        return Array.prototype.slice.call(this.element.children);\n    }\n    get showing(){\n        return !!this.element.style.opacity;\n    }\n    choose(direction){\n\n        if([-1, 1].indexOf(direction) === -1){\n            return;\n        }\n\n        let className = this.classes.selected;\n        let selected = this.element.querySelector('.'+className);\n        let children = this.children;\n        let index = selected\n        ? children.indexOf(selected) + direction : 0;\n\n        if(index === children.length){\n            index = 0;\n        }else if(index === -1){\n            index = children.length - 1;\n        }\n\n        if(direction === 1){\n            for(let i=index; i<children.length; ++i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    break;\n                }\n            }\n        }else{\n            for(let i=index; i>=0; --i){\n                if(children[i].style.display !== 'none'){\n                    children[i].classList.add(className);\n                    break;\n                }\n            }\n        }\n\n        if(selected){\n            selected.classList.remove(className);\n        }\n    }\n    hide(){\n        this.element.style.opacity = 0;\n    }\n    push(...values){\n        values.forEach(value=>{\n            let el = toElement(value);\n            this.element.appendChild(el);\n            this.searchable.push(el);\n            el.style.display = 'none';\n        });\n        return this;\n    }\n    replace(values){\n        values.forEach(value=>this.push(value));\n        return this;\n    }\n    appendTo(el){\n        el.appendChild(this.element);\n        return this;\n    }\n    remove(){\n        if(this.element.parentNode){\n            return this.element.parentNode.removeChild(this.element);\n        }\n    }\n}\n\nexport default function autoComplete(input, options){\n    return new DOMTextAutocomplete(input, options);\n}\n\n\n\nfunction makeSelection(children, className, start){\n    for(let i=start; i<children.length; i++){\n        if(children[i].style.display !== 'none'){\n            children[i].classList.add(className);\n        }\n    }\n}\n"],"names":["preserveCamelCase","str","let","isLastCharLower","isLastCharUpper","isLastLastCharUpper","i","length","const","c","test","toUpperCase","substr","toLowerCase","isDocumentFragment","v","isElemental","isElement","input","nodeType","Node","ELEMENT_NODE","style","ownerDocument","isDate","Object","prototype","toString","call","toHTML","values","len","arguments","map","isObject","hasOwnProperty","element","outerHTML","d","document","createElement","appendChild","cloneNode","innerHTML","join","stringToFragment","frag","createDocumentFragment","firstChild","stringToElement","children","removeChild","toLocaleString","language","localeOptions","e","objectToString","constructor","JSON","stringify","setData","el","data","dataset","keys","forEach","key","camelcase","setAttributes","attributes","setAttribute","indexOf","setStyles","styles","allstyles","window","getComputedStyle","setProperty","decamelize","toElement","isArrayLike","arrayFrom","convert","reduce","html","value","objectToDOM","querySelector","obj","index","parentNode","hadKey","splice","Error","tag","head","appendChildren","foot","parent","child","getTarget","target","targets","matches","toLeaves","tree","results","depthLimit","leaf","push","branches","current","isArray","Array","val","o","fn","string","setTimeout","alert","confirm","prompt","isFunction","isWindow","isCallable","toInteger","number","Number","isNaN","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","min","max","iteratorProp","Symbol","iterator","getMethod","O","P","func","TypeError","iteratorStep","result","next","Boolean","done","items","T","C","this","mapFn","A","k","usingIterator","nextValue","arrayLike","kValue","from","require$$0","x","trim","filter","replace","m","p1","weekday","year","month","day","hour","minute","second","navigator","userLanguage","proto","Element","vendor","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","selector","nodes","querySelectorAll","Searchable","ref","main","classes","dataProp","dataKey","sep","RegExp","separator","list","split","item","elements","match","last","potential","j","notFound","findAll","console","log","noKeyDown","DOMTextAutocomplete","run","event","clearTimeout","keyTimer","activate","self","onTab","searchable","onKeyup","keyCode","which","showing","choose","onEnter","selected","classList","remove","select","preventDefault","onDown","down","onUp","hide","show","clas","display","visible","opacity","ref$2","addEventListener","destroy","removeEventListener","found","this$1","error","callback","prototypeAccessors","slice","direction","className","add","appendTo","options"],"mappings":"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"}